@namespace AntDesign.Pro.Pages.Lists
@page "/list/basic-list"

<div>
    <PageContainer>
        <div class="standardList">
            <Card>
                <Row Gutter="24">
                    <AntDesign.Col Sm="8" Xs="24">
                        @Info("我的待办", "8个任务", true)
                    </AntDesign.Col>
                    <AntDesign.Col Sm="8" Xs="24">
                        @Info("本周任务平均处理时间", "32分钟", true)
                    </AntDesign.Col>
                    <AntDesign.Col Sm="8" Xs="24">
                        @Info("本周完成任务数", "24个任务")
                    </AntDesign.Col>
                </Row>
            </Card>

            <Card Class="listCard"
                  Title="@("基本列表")"
                  Style="margin-top: 24px;"
                  BodyStyle="padding: 0 32px 40px 32px">
                <Extra>

                </Extra>
                <ChildContent>
                    <Button Type="dashed"
                            Style="width: 100%; margin-bottom: 8px;"
                            OnClick="ShowModal">
                        <Icon Type="plus" Theme="outline" />
                        添加
                    </Button>
                    
                    <AntList TItem="ListItemDataType" DataSource="_data" ItemLayout="AntDirectionVHType.Horizontal" Actions="_actions">
                        <Item Context="item">
                            <AntListItemMeta Avatar="@item.Avatar" Description="@item.SubDescription">
                                <Title>
                                    <a href="@item.Href">@item.Title</a>
                                </Title>
                            </AntListItemMeta>
                            <div class="listContent">
                                <div class="listContentItem">
                                    <span>Owner</span>
                                    <p>@item.Owner</p>
                                </div>
                                <div class="listContentItem">
                                    <span>开始时间</span>
                                    <p>@item.CreatedAt.ToString("yyyy-MM-dd HH:mm")</p>
                                </div>
                                <div class="listContentItem">
                                    <AntDesign.Progress Percent="@item.Percent" Status="@_pStatus[item.Status]" StrokeWidth="6" Style="width: 180px;" />
                                </div>
                            </div>
                        </Item>
                    </AntList>
                </ChildContent>
            </Card>
        </div>
    </PageContainer>
</div>

@code
{
    private static readonly RenderFragment Edit = @<a key="edit">
                                                      编辑
                                                   </a>;

    private readonly List<RenderFragment> _actions = new List<RenderFragment>
    {
        Edit
    }; 

    private ListItemDataType[] _data = {};

    private readonly IDictionary<string, ProgressStatus> _pStatus = new Dictionary<string, ProgressStatus>
    {
        {"active", ProgressStatus.Active},
        {"exception", ProgressStatus.Exception},
        {"normal", ProgressStatus.Normal},
        {"success", ProgressStatus.Success}
    };

    private RenderFragment Info(string title, string value, bool bordered = false)
    {
        return @<div class="headerInfo">
                   <span>@title</span>
                   <p>@value</p>
                   @if (bordered)
                   {
                       <em/>
                   }
               </div>;
    }

    private void ShowModal()
    {
    }

    [Inject]
    protected IProjectService ProjectService { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        _data = await ProjectService.GetFakeListAsync(5);
    }
}
